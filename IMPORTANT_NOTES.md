# ⚠️ הערות חשובות - שינויים באבטחה

## 🔐 לגבי הסיסמאות

**הסיסמאות עדיין לא הוצפנו!** 

כרגע הקוד תומך גם בסיסמאות מוצפנות וגם בסיסמאות ישנות (לא מוצפנות) כדי לאפשר migration חלק.

**כדי להצפין את כל הסיסמאות הקיימות:**
```bash
python migrate_passwords.py
```

הסקריפט:
- יוצר backup אוטומטי של `users_db.json`
- מצפין את כל הסיסמאות הקיימות
- משאיר את הסיסמאות הישנות בקובץ backup

**⚠️ חשוב:** אחרי שהצפנת את הסיסמאות, הסיסמאות הישנות (כמו "1234") עדיין יעבדו זמנית, אבל כל סיסמה חדשה שתיצור תהיה מוצפנת.

---

## 🛡️ לגבי CSRF Protection

הוספתי CSRF protection למערכת, אבל:

1. **טופס הכניסה** - פטור זמני מ-CSRF (עד שנוסיף tokens לכל הטפסים)
2. **טופס איפוס סיסמה** - יש CSRF token
3. **reset_password_request** - פטור כי זה נקרא מ-modal
4. **reset_password** - פטור כי יש לו token משלו

**בעתיד:** צריך להוסיף CSRF tokens לכל הטפסים ב-POST במערכת. ראה `SECURITY_CHANGES_LOG.md` לפרטים.

---

## ✅ מה כבר עובד

- ✅ השרת רץ
- ✅ התחברות עובדת (עם או בלי הצפנה)
- ✅ CSRF tokens הוספו לטפסי כניסה ואיפוס סיסמה
- ✅ Rate Limiting מופעל (5 ניסיונות לדקה)

---

## 📝 הפעולות הבאות

1. **הרץ את migrate_passwords.py** להצפנת סיסמאות
2. **צור קובץ .env** עם SECRET_KEY ו-SMTP credentials
3. **בעתיד:** הוסף CSRF tokens לכל שאר הטפסים


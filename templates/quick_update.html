<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>×¢×“×›×•×Ÿ ××”×™×¨ | ×•×ª×§×™×Ÿ ×‘×•×˜×™×§</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; padding-right: 260px; font-family: 'Heebo', sans-serif; background: #f8fafc; direction: rtl; }
        .sidebar { position: fixed; top: 0; right: 0; width: 260px; height: 100%; background: #292f4c; color: white; display: flex; flex-direction: column; }
        .sidebar-logo { padding: 20px; background: white; text-align: center; }
        .sidebar-logo img { max-width: 150px; height: auto; }
        .nav-link { display: block; color: #cdd1e4; text-decoration: none; padding: 15px 25px; transition: 0.2s; }
        .container { padding: 40px; }
        .task-row { background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; display: grid; grid-template-columns: 2fr 1fr 1fr 2fr; gap: 20px; align-items: center; border: 1px solid #e6e9ef; }
        select { padding: 8px; border-radius: 4px; border: none; color: white; font-weight: bold; cursor: pointer; }
        .status-×××ª×™×Ÿ { background: #c4c4c4; } .status-×‘×‘×™×¦×•×¢ { background: #fdab3d; } .status-×‘×•×¦×¢ { background: #00c875; }
        input[type="text"] { padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 80%; }
        button { background: #0073ea; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-logo"><img src="{{ url_for('static', filename='Vatkin_Logo.jpg') }}"></div>
        <a href="/" class="nav-link">ğŸ  ×“×£ ×”×‘×™×ª</a>
        <a href="/quick_update" class="nav-link active">âš¡ ×¢×“×›×•×Ÿ ××”×™×¨</a>
        <a href="/finance" class="nav-link">ğŸ’° ×›×¡×¤×™×</a>
    </div>
    <div class="container">
        <h1>×¢×“×›×•×Ÿ ××©×™××•×ª ××”×™×¨ (×›×œ ×”×œ×§×•×—×•×ª)</h1>
        {% for item in tasks %}
        <div class="task-row">
            <div>
                <small style="color: #0073ea;">{{ item.client_name }} â€¢ {{ item.project_title }}</small>
                <div style="font-weight: bold;">{{ item.task.desc }}</div>
            </div>
            <div>ğŸ‘¤ {{ item.task.assigned_to_name }}</div>
            <form action="/update_task/{{ item.client_id }}/{{ item.project_id }}/{{ item.task.id }}" method="POST" style="display: contents;">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <select name="status" class="status-{{ item.task.status }}" onchange="this.form.submit()">
                    <option value="×××ª×™×Ÿ" {% if item.task.status == '×××ª×™×Ÿ' %}selected{% endif %}>×××ª×™×Ÿ</option>
                    <option value="×‘×‘×™×¦×•×¢" {% if item.task.status == '×‘×‘×™×¦×•×¢' %}selected{% endif %}>×‘×‘×™×¦×•×¢</option>
                    <option value="×‘×•×¦×¢" {% if item.task.status == '×‘×•×¦×¢' %}selected{% endif %}>×‘×•×¦×¢</option>
                </select>
                <div style="display: flex; gap: 10px;">
                    <input type="text" name="notes" value="{{ item.task.notes }}" placeholder="×”×•×¡×£ ×”×¢×¨×”...">
                    <button type="submit">×©××•×¨</button>
                </div>
            </form>
        </div>
        {% endfor %}
    </div>
</body>
</html>